<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">

  <meta name="theme-color" content="#fafafa">
  <!-- CSS only -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

  <!-- JS, Popper.js, and jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
</head>

<body style="background: #222222">

  <!-- Add your site or application content here -->
  <p style="color: white;font-family: 'Comic Sans MS';font-size:30px">Pulsa un botón para ver el animal y escucharlo.</p>
  <script src="js/vendor/modernizr-3.11.2.min.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/main.js"></script>

  <p id="pulsaboton" style="visibility: visible;color: white;font-family: 'Comic Sans MS';font-size:30px">
    Pulsa un botón en el controlador para conectar.</p>
  <img id="caballo" src="img/caballo.jpg" style="display:none" class="rounded mx-auto" width="830" height="431"/>
  <img id="elefante" src="img/elefante.jpg" style="display:none" class="rounded mx-auto" width="830" height="431"/>
  <img id="gallo" src="img/gallo.jpg" style="display:none" class="rounded mx-auto" width="830" height="431"/>
  <img id="oveja" src="img/oveja.jpg" style="display:none" class="rounded mx-auto" width="830" height="431"/>
  <img id="pajaro" src="img/pajaro.jpg" style="display:none" class="rounded mx-auto" width="830" height="431"/>
  <img id="pato" src="img/pato.jpg" style="display:none" class="rounded mx-auto" width="830" height="431"/>
  <img id="perro" src="img/perro.jpg" style="display:none" class="rounded mx-auto" width="830" height="431"/>

  <div id="buttons" style="visibility: hidden; flex-direction: column;"></div>

  <script>
    ocultarconectar = function()
    {
      x=document.getElementById("pulsaboton")
      x.style.visibility="hidden";
    }
    vercaballo = function()
    {
      x=document.getElementById("caballo")
      x.style.display="block";
    }
    ocultarcaballo = function()
    {
      x=document.getElementById("caballo")
      x.style.display="none";
    }
    verelefante = function()
    {
      x=document.getElementById("elefante")
      x.style.display="block";
    }
    ocultarelefante = function()
    {
      x=document.getElementById("elefante")
      x.style.display="none";
    }
    vergallo = function()
    {
      x=document.getElementById("gallo")
      x.style.display="block";
    }
    ocultargallo = function()
    {
      x=document.getElementById("gallo")
      x.style.display="none";
    }
    veroveja = function()
    {
      x=document.getElementById("oveja")
      x.style.display="block";
    }
    ocultaroveja = function()
    {
      x=document.getElementById("oveja")
      x.style.display="none";
    }
    verpajaro = function()
    {
      x=document.getElementById("pajaro")
      x.style.display="block";
    }
    ocultarpajaro = function()
    {
      x=document.getElementById("pajaro")
      x.style.display="none";
    }
    verpato = function()
    {
      x=document.getElementById("pato")
      x.style.display="block";
    }
    ocultarpato = function()
    {
      x=document.getElementById("pato")
      x.style.display="none";
    }
    verperro = function()
    {
      x=document.getElementById("perro")
      x.style.display="block";
    }
    ocultarperro = function()
    {
      x=document.getElementById("perro")
      x.style.display="none";
    }
    var boton_pulsado=0

    window.addEventListener('gamepadconnected', (event) => {
      const update = () => {
        const output = document.getElementById('caballo');
        output.innerHTML = ''; // clear the output

        for (const gamepad of navigator.getGamepads()) {
          if (!gamepad) continue;
          for (const [index, button] of gamepad.buttons.entries()) {
            if (index == 6 && button.pressed && boton_pulsado!=6){
              var music = new Audio('sounds/perro.mp3');
              boton_pulsado=index
              music.volume = 0.4
              music.play();
              ocultarconectar()
              verperro()
            }
            if (button.pressed==false && index == boton_pulsado){
              boton_pulsado=0
              ocultarperro()
            }
            if (index == 7 && button.pressed && boton_pulsado!=7){
              var music = new Audio('sounds/oveja.mp3');
              boton_pulsado=index
              music.volume = 1
              music.play();
              ocultarconectar()
              veroveja()
            }
            if (button.pressed==false && index == boton_pulsado){
              boton_pulsado=0
              ocultaroveja()
            }
            if (index == 1 && button.pressed && boton_pulsado!=1){
              var music = new Audio('sounds/pato.mp3');
              boton_pulsado=index
              music.volume = 1
              music.play();
              ocultarconectar()
              verpato()
            }
            if (button.pressed==false && index == boton_pulsado){
              boton_pulsado=0
              ocultarpato()
            }
            if (index == 17 && button.pressed && boton_pulsado!=17){
              var music = new Audio('sounds/pajaro.mp3');
              boton_pulsado=index
              music.volume = 1
              music.play();
              ocultarconectar()
              verpajaro()
            }
            if (button.pressed==false && index == boton_pulsado){
              boton_pulsado=0
              ocultarpajaro()
            }
            if (index == 16 && button.pressed && boton_pulsado!=16){
              var music = new Audio('sounds/gallo.mp3');
              boton_pulsado=index
              music.volume = 1
              music.play();
              ocultarconectar()
              vergallo()
            }
            if (button.pressed==false && index == boton_pulsado){
              boton_pulsado=0
              ocultargallo()
            }
            if (index == 14 && button.pressed && boton_pulsado!=14){
              var music = new Audio('sounds/elefante.mp3');
              boton_pulsado=index
              music.volume = 0.4
              music.play();
              ocultarconectar()
              verelefante()
            }
            if (button.pressed==false && index == boton_pulsado){
              boton_pulsado=0
              ocultarelefante()
            }
            if (index == 13 && button.pressed && boton_pulsado!=13){
              var music = new Audio('sounds/caballo.mp3');
              boton_pulsado=index
              music.volume = 0.4
              music.play();
              vercaballo()
              ocultarconectar()
            }
            if (button.pressed==false && index == boton_pulsado){
              boton_pulsado=0
              ocultarcaballo()
            }

            output.insertAdjacentHTML('beforeend',
              `<label>${gamepad.index}, ${index}
             <progress value=${button.value}></progress>
             ${button.touched ? 'touched' : ''}
             ${button.pressed ? 'pressed' : ''}
           </label>`);
          }
        }
        requestAnimationFrame(update);
      };
      update();
    });


  </script>
</body>

</html>
